# ğŸ¤– **Há»† THá»NG AI CHATBOT CÃ NHÃ‚N - HÆ¯á»šNG DáºªN Sá»¬ Dá»¤NG**

## ğŸ¯ **Tá»•ng quan**

Há»‡ thá»‘ng ADR Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t Ä‘á»ƒ há»— trá»£ **AI Chatbot cÃ¡ nhÃ¢n**. Tá»« nay, má»—i ngÆ°á»i dÃ¹ng sáº½ sá»­ dá»¥ng API key riÃªng cá»§a mÃ¬nh thay vÃ¬ chia sáº» chung, mang láº¡i nhiá»u lá»£i Ã­ch:

âœ… **Báº£o máº­t cao hÆ¡n** - API key Ä‘Æ°á»£c mÃ£ hÃ³a riÃªng
âœ… **KhÃ´ng giá»›i háº¡n quota** - Sá»­ dá»¥ng quota riÃªng cá»§a báº¡n
âœ… **Tá»± quáº£n lÃ½ chi phÃ­** - Chá»‰ tráº£ tiá»n cho nhá»¯ng gÃ¬ báº¡n sá»­ dá»¥ng
âœ… **Lá»±a chá»n AI** - ChatGPT hoáº·c Gemini tÃ¹y Ã½

---

## ğŸš€ **HÆ¯á»šNG DáºªN Báº®T Äáº¦U**

### **BÆ°á»›c 1: Truy cáº­p trang Settings**

1. ÄÄƒng nháº­p vÃ o há»‡ thá»‘ng ADR
2. VÃ o menu bÃªn trÃ¡i â†’ **"CÃ i Ä‘áº·t"** 
3. Chá»n tab **"API Keys"**

### **BÆ°á»›c 2: Chá»n AI Provider**

**ğŸ”· Google Gemini (Khuyáº¿n nghá»‹ cho ngÆ°á»i má»›i)**
- âœ… **Miá»…n phÃ­** - KhÃ´ng cáº§n tháº» tÃ­n dá»¥ng
- âœ… **60 requests/phÃºt, 1,500/ngÃ y**
- âœ… **Cháº¥t lÆ°á»£ng tá»‘t** cho tÆ° váº¥n y khoa
- ğŸ“– [HÆ°á»›ng dáº«n láº¥y API key Gemini](./AI-CHATBOT-GEMINI-SETUP.md)

**ğŸ¤– OpenAI ChatGPT (Cháº¥t lÆ°á»£ng cao)**
- ğŸ’° **CÃ³ phÃ­** - ~$0.002/1K tokens
- âœ… **Cháº¥t lÆ°á»£ng cao nháº¥t**
- âœ… **Pháº£n há»“i chi tiáº¿t, chÃ­nh xÃ¡c**
- ğŸ“– [HÆ°á»›ng dáº«n láº¥y API key OpenAI](./AI-CHATBOT-OPENAI-SETUP.md)

### **BÆ°á»›c 3: ThÃªm API Key vÃ o há»‡ thá»‘ng**

1. Nháº¥n **"ThÃªm API Key"**
2. Chá»n Provider (Gemini hoáº·c OpenAI)
3. DÃ¡n API key vÃ o Ã´ input
4. Äáº·t tÃªn gá»£i nhá»› (tÃ¹y chá»n)
5. Nháº¥n **"ThÃªm API Key"**

### **BÆ°á»›c 4: Test API Key**

1. Nháº¥n nÃºt **"Test"** bÃªn cáº¡nh API key
2. Chá» há»‡ thá»‘ng kiá»ƒm tra (5-10 giÃ¢y)
3. Tháº¥y âœ… **"Hoáº¡t Ä‘á»™ng tá»‘t"** = ThÃ nh cÃ´ng!

### **BÆ°á»›c 5: Sá»­ dá»¥ng AI Chatbot**

1. VÃ o **Reports â†’ New Report**
2. Äiá»n thÃ´ng tin bá»‡nh nhÃ¢n vÃ  ADR
3. Scroll xuá»‘ng pháº§n **"Assessment"**
4. Nháº¥n **"ğŸ¤– AI Consultant"**
5. Chat vá»›i AI vá» case!

---

## ğŸ’¡ **CÃCH Sá»¬ Dá»¤NG AI CHATBOT HIá»†U QUáº¢**

### **âœ… CÃ¢u há»i nÃªn há»i:**

```
âœ… "PhÃ¢n tÃ­ch case nÃ y theo thang WHO-UMC"
âœ… "TÃ­nh Ä‘iá»ƒm Naranjo chi tiáº¿t cho trÆ°á»ng há»£p nÃ y"
âœ… "Khuyáº¿n nghá»‹ xá»­ trÃ­ lÃ¢m sÃ ng cá»¥ thá»ƒ"
âœ… "Cáº§n lÃ m thÃªm xÃ©t nghiá»‡m gÃ¬ Ä‘á»ƒ há»— trá»£ Ä‘Ã¡nh giÃ¡?"
âœ… "PhÃ¢n tÃ­ch dechallenge/rechallenge"
âœ… "Risk factors cáº§n lÆ°u Ã½ cho bá»‡nh nhÃ¢n nÃ y"
```

### **âŒ CÃ¢u há»i nÃªn trÃ¡nh:**

```
âŒ "PhÃ¢n tÃ­ch" (quÃ¡ chung chung)
âŒ "CÃ³ gÃ¬?" (khÃ´ng cá»¥ thá»ƒ)
âŒ "Thuá»‘c nÃ y tháº¿ nÃ o?" (thiáº¿u context)
```

### **ğŸ¯ Tips sá»­ dá»¥ng:**

1. **Äiá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin** trÆ°á»›c khi chat
2. **Sá»­ dá»¥ng gá»£i Ã½** cÃ³ sáºµn á»Ÿ sidebar
3. **Chuyá»ƒn Ä‘á»•i AI providers** Ä‘á»ƒ so sÃ¡nh
4. **Apply insights** vÃ o form Ä‘á»ƒ tiáº¿t kiá»‡m thá»i gian
5. **Chat theo tá»«ng váº¥n Ä‘á»** thay vÃ¬ há»i quÃ¡ nhiá»u cÃ¹ng lÃºc

---

## ğŸ”§ **QUáº¢N LÃ API KEYS**

### **Xem danh sÃ¡ch API Keys**
- VÃ o **Settings â†’ API Keys**
- Xem táº¥t cáº£ keys Ä‘Ã£ thÃªm
- Kiá»ƒm tra tráº¡ng thÃ¡i: âœ… Há»£p lá»‡ | âŒ KhÃ´ng há»£p lá»‡ | âš ï¸ ChÆ°a test

### **Test API Key**
- Nháº¥n nÃºt **"Test"** 
- Há»‡ thá»‘ng sáº½ gá»i thá»­ API
- Káº¿t quáº£ hiá»ƒn thá»‹ ngay láº­p tá»©c

### **Báº­t/Táº¯t API Key**
- Nháº¥n **"Báº­t"** hoáº·c **"Táº¯t"**
- Chá»‰ keys **Ä‘ang báº­t** vÃ  **há»£p lá»‡** má»›i Ä‘Æ°á»£c sá»­ dá»¥ng

### **XÃ³a API Key**
- Nháº¥n biá»ƒu tÆ°á»£ng **ğŸ—‘ï¸**
- XÃ¡c nháº­n xÃ³a
- âš ï¸ **LÆ°u Ã½:** KhÃ´ng thá»ƒ khÃ´i phá»¥c sau khi xÃ³a

---

## ğŸ“Š **GIá»šI Háº N VÃ€ CHI PHÃ**

### **Google Gemini (Miá»…n phÃ­)**

| Loáº¡i | Giá»›i háº¡n | Ghi chÃº |
|-------|----------|---------|
| **Requests/phÃºt** | 60 | Äá»§ cho sá»­ dá»¥ng thÃ´ng thÆ°á»ng |
| **Requests/ngÃ y** | 1,500 | Reset hÃ ng ngÃ y |
| **Chi phÃ­** | $0 | HoÃ n toÃ n miá»…n phÃ­ |
| **Cháº¥t lÆ°á»£ng** | Tá»‘t | PhÃ¹ há»£p tÆ° váº¥n ADR |

### **OpenAI ChatGPT (CÃ³ phÃ­)**

| Model | Chi phÃ­ Input | Chi phÃ­ Output | Ghi chÃº |
|--------|---------------|----------------|---------|
| **GPT-4** | $0.03/1K tokens | $0.06/1K tokens | Cháº¥t lÆ°á»£ng cao nháº¥t |
| **GPT-3.5** | $0.0015/1K tokens | $0.002/1K tokens | Ráº» hÆ¡n, váº«n tá»‘t |

**Æ¯á»›c tÃ­nh chi phÃ­:**
- 1 cuá»™c chat = ~500-1000 tokens
- 1 cuá»™c chat GPT-4 = ~$0.03-0.06
- 1 cuá»™c chat GPT-3.5 = ~$0.001-0.003

---

## ğŸ†˜ **TROUBLESHOOTING**

### **Lá»—i: "Báº¡n chÆ°a cáº¥u hÃ¬nh API key"**

**NguyÃªn nhÃ¢n:** ChÆ°a thÃªm API key hoáº·c key bá»‹ vÃ´ hiá»‡u hÃ³a

**Giáº£i phÃ¡p:**
1. VÃ o **Settings â†’ API Keys**
2. ThÃªm API key má»›i hoáº·c báº­t key hiá»‡n cÃ³
3. Test key Ä‘á»ƒ Ä‘áº£m báº£o hoáº¡t Ä‘á»™ng
4. Quay láº¡i chatbot thá»­ láº¡i

### **Lá»—i: "API key khÃ´ng há»£p lá»‡"**

**NguyÃªn nhÃ¢n:** API key sai hoáº·c Ä‘Ã£ bá»‹ thu há»“i

**Giáº£i phÃ¡p:**
1. Kiá»ƒm tra API key Ä‘Ã£ copy Ä‘Ãºng chÆ°a
2. Táº¡o API key má»›i tá»« provider
3. Cáº­p nháº­t trong Settings
4. Test láº¡i

### **Lá»—i: "Rate limit exceeded"**

**NguyÃªn nhÃ¢n:** VÆ°á»£t quota cá»§a provider

**Giáº£i phÃ¡p:**
- **Gemini:** Äá»£i 1 phÃºt rá»“i thá»­ láº¡i
- **OpenAI:** Kiá»ƒm tra billing account
- Giáº£m táº§n suáº¥t sá»­ dá»¥ng

### **Chatbot khÃ´ng pháº£n há»“i**

**Kiá»ƒm tra:**
1. ÄÃ£ Ä‘iá»n Ä‘á»§ thÃ´ng tin Patient + ADR chÆ°a?
2. API key cÃ³ Ä‘ang hoáº¡t Ä‘á»™ng khÃ´ng?
3. Káº¿t ná»‘i internet á»•n Ä‘á»‹nh khÃ´ng?
4. Thá»­ refresh trang vÃ  chat láº¡i

---

## ğŸ”’ **Báº¢O Máº¬T VÃ€ QUYá»€N RIÃŠNG TÆ¯**

### **An toÃ n API Key**
- âœ… API keys Ä‘Æ°á»£c **mÃ£ hÃ³a** trÆ°á»›c khi lÆ°u database
- âœ… Chá»‰ báº¡n má»›i tháº¥y Ä‘Æ°á»£c keys cá»§a mÃ¬nh
- âœ… Admin khÃ´ng thá»ƒ xem API keys cá»§a user
- âœ… Keys Ä‘Æ°á»£c truyá»n an toÃ n qua HTTPS

### **Quyá»n riÃªng tÆ° dá»¯ liá»‡u**
- âœ… Chá»‰ thÃ´ng tin ADR cáº§n thiáº¿t Ä‘Æ°á»£c gá»­i Ä‘áº¿n AI
- âœ… KhÃ´ng gá»­i thÃ´ng tin cÃ¡ nhÃ¢n nháº¡y cáº£m
- âœ… Chat history khÃ´ng Ä‘Æ°á»£c lÆ°u vÄ©nh viá»…n
- âœ… TuÃ¢n thá»§ quy Ä‘á»‹nh GDPR vÃ  HIPAA

### **Khuyáº¿n nghá»‹ báº£o máº­t**
- ğŸ”’ KhÃ´ng chia sáº» API key vá»›i ai
- ğŸ”’ ThÆ°á»ng xuyÃªn kiá»ƒm tra usage á»Ÿ provider
- ğŸ”’ Thu há»“i key cÅ© khi khÃ´ng dÃ¹ng ná»¯a
- ğŸ”’ BÃ¡o ngay náº¿u nghi ngá» key bá»‹ lá»™

---

## ğŸ“š **TÃ€I LIá»†U THAM KHáº¢O**

### **HÆ°á»›ng dáº«n chi tiáº¿t**
- ğŸ“– [CÃ¡ch láº¥y Google Gemini API key](./AI-CHATBOT-GEMINI-SETUP.md)
- ğŸ“– [CÃ¡ch láº¥y OpenAI API key](./AI-CHATBOT-OPENAI-SETUP.md)
- ğŸ“– [WHO-UMC Causality Assessment](./who-umc-guidelines.md)
- ğŸ“– [Naranjo Scale Guide](./naranjo-scale-guide.md)

### **Resources Provider**
- ğŸ”— [Google AI Studio](https://aistudio.google.com/app/apikey)
- ğŸ”— [OpenAI Platform](https://platform.openai.com/api-keys)
- ğŸ”— [Gemini Pricing](https://ai.google.dev/pricing)
- ğŸ”— [OpenAI Pricing](https://openai.com/pricing)

---

## ğŸ“ **EXAMPLES - CÃC CASE STUDY MáºªU**

### **Case 1: ADR náº·ng vá»›i nhiá»u thuá»‘c**

**Input vÃ o form:**
- Patient: Nam, 65 tuá»•i, 70kg
- Drugs: Aspirin, Warfarin, Metformin
- ADR: Cháº£y mÃ¡u dáº¡ dÃ y nghiÃªm trá»ng

**CÃ¢u há»i hay:**
```
"PhÃ¢n tÃ­ch má»‘i liÃªn quan cá»§a tá»«ng thuá»‘c vá»›i cháº£y mÃ¡u dáº¡ dÃ y theo thang WHO-UMC. Thuá»‘c nÃ o cÃ³ kháº£ nÄƒng cao nháº¥t?"
```

**Káº¿t quáº£ mong Ä‘á»£i:**
- Aspirin: Probable/Certain (cÆ¡ cháº¿ rÃµ rÃ ng)
- Warfarin: Probable (tÆ°Æ¡ng tÃ¡c thuá»‘c)
- Metformin: Unlikely (khÃ´ng liÃªn quan)

### **Case 2: ADR da liá»…u**

**Input vÃ o form:**
- Patient: Ná»¯, 30 tuá»•i
- Drug: Amoxicillin
- ADR: PhÃ¡t ban toÃ n thÃ¢n sau 3 ngÃ y dÃ¹ng thuá»‘c

**CÃ¢u há»i hay:**
```
"TÃ­nh Ä‘iá»ƒm Naranjo chi tiáº¿t vÃ  Ä‘Æ°a ra khuyáº¿n nghá»‹ xá»­ trÃ­ cáº¥p tÃ­nh cho bá»‡nh nhÃ¢n nÃ y"
```

---

## ğŸ“ **Há»– TRá»¢**

### **Khi nÃ o cáº§n há»— trá»£?**
- KhÃ´ng thá»ƒ thÃªm Ä‘Æ°á»£c API key
- AI tráº£ lá»i khÃ´ng chÃ­nh xÃ¡c hoáº·c láº¡
- Váº¥n Ä‘á» vá» billing/chi phÃ­
- Lá»—i ká»¹ thuáº­t khÃ¡c

### **CÃ¡ch liÃªn há»‡:**
- ğŸ“§ Email: support@adr-system.com
- ğŸ’¬ Chat: Trong há»‡ thá»‘ng (gÃ³c pháº£i dÆ°á»›i)
- ğŸ“± Hotline: 1900-ADR-HELP

### **ThÃ´ng tin cáº§n cung cáº¥p:**
- TÃªn Ä‘Äƒng nháº­p
- Provider Ä‘ang dÃ¹ng (Gemini/OpenAI)
- MÃ´ táº£ lá»—i chi tiáº¿t
- Screenshot náº¿u cÃ³

---

**ğŸ“… Cáº­p nháº­t:** ThÃ¡ng 10, 2025  
**ğŸ”„ Version:** 2.0 - Personal API Keys  
**ğŸ‘¥ Team:** Codex-ADR Development

---

**ğŸ‰ ChÃºc báº¡n sá»­ dá»¥ng AI Chatbot hiá»‡u quáº£ vÃ  an toÃ n!** ğŸš€


